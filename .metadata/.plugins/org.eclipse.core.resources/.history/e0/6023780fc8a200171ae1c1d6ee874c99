package nhnent;
import java.awt.print.Printable;
import java.util.*;

public class four {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		//원래는 5번째 문제이지만,..
		//섬탈출 문제
		//우선순위(성별, 나이, 조건)
		//사람수
		//사람 별 특징
		Scanner sc = new Scanner(System.in);
		int[] prio = new int[3];
		int perNum;
		
		String []line = sc.nextLine().split(" ");
		for(int i = 0; i < 3; i++) {
			prio[i] = Integer.parseInt(line[i]);
		}
		perNum = sc.nextInt();
		sc.nextLine();
		
		String[][] person = new String[perNum][3];
		
		for(int i = 0; i < perNum; i++) {
			String []perOne = sc.nextLine().split(" ");
			person[i] = perOne;
		}
		
		for(int i = 0; i < 3; i++) {
			
			if( prio[i] == 1) {//성별 
				for(int j = 0; j < perNum-1; j++) {
					String []temp = new String[3];
					if(person[j][0].equals("M")) {
						temp = person[j];
						person[j] = person[j+1];
						person[j+1] = temp;
					}
				}
			}else if(prio[i] == 2) {//나이 
				for(int j = 0; j < perNum; j++) {
					
				}
			}else if(prio[i] == 3) { //조건 
				for(int j = 0; j < perNum; j++) {
					
				}
			}
			
		}
		
		for(int i = 0; i < perNum; i++) {
			for(int j = 0; j < person[i].length; j++) {
				System.out.print(person[i][j] + " ");
			}
			System.out.println();
		}
		
	}

}
